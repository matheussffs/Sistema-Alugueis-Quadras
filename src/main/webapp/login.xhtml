<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://xmlns.jcp.org/jsf/core">

<h:head>
	<title>Login - Flash Quadras</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />

	<h:outputStylesheet library="css" name="main.css" />
	<h:outputStylesheet library="css" name="estiloLogin.css" />
	<h:outputScript library="js" name="primefacesLocale.js" />

	<style>
html, body {
	height: 100%;
	margin: 0;
	padding: 0;
	min-height: 100vh;
}

body {
	background-color: #10B981;
	background-image: linear-gradient(135deg, #065F46 0%, #10B981 100%);
	background-size: cover;
	background-attachment: fixed;
	display: flex;
	justify-content: center;
	align-items: center;
	position: relative;
}

.home-link {
	position: absolute;
	top: 30px;
	left: 40px;
	text-decoration: none;
	color: #ffffff;
	display: flex;
	align-items: center;
	z-index: 1000;
	transition: opacity 0.2s, transform 0.2s;
}

.home-link:hover {
	opacity: 0.9;
	transform: translateY(-2px);
}

.logo-text {
	font-size: 1.5rem;
	font-weight: 700;
	font-family: 'Inter', sans-serif;
	margin-left: 8px;
}

@media ( max-width : 600px) {
	.home-link {
		top: 15px;
		left: 15px;
	}
	.logo-text {
		font-size: 1.2rem;
	}
}

.divBody {
	display: flex;
	justify-content: center;
	align-items: center;
	width: 100%;
	flex-grow: 1;
}

.divLogin {
	background-color: #FFFFFF;
	padding: 2.5rem;
	border-radius: 12px;
	box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
	max-width: 400px;
	width: 90%;
	text-align: center;
}

.btnLogin, .btnCadastro {
	border-radius: 25px !important;
	padding: 6px 0 !important;
	width: 180px !important;
	font-size: 0.9rem !important;
	font-weight: bold !important;
	display: inline-block !important;
	transition: all 0.3s ease !important;
	box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
}

.btnLogin {
	background-color: #10B981 !important;
	color: #fff !important;
	border: none !important;
	margin-top: 5px;
}

.btnLogin:hover {
	background-color: #059669 !important;
	transform: scale(1.02);
}

.btnCadastro {
	background-color: #ffffff !important;
	border: 1px solid #10B981 !important;
	color: #10B981 !important;
}

.btnCadastro:hover {
	background-color: #10B981 !important;
	color: #ffffff !important;
	transform: scale(1.02);
	text-decoration: none;
}

.btnLogin .ui-button-text, .btnCadastro .ui-button-text {
	padding: 0 !important;
	line-height: normal;
}

.btnDialog {
	background-color: #10B981 !important;
	color: #fff !important;
	border: none !important;
	border-radius: 25px !important;
	padding: 8px 25px !important;
	font-weight: bold !important;
	margin-top: 15px !important;
	font-size: 1rem !important;
}

.btnDialog:hover {
	background-color: #059669 !important;
	transform: scale(1.02);
}

div ~ a {
	text-align: center;
}

.ui-panelgrid-cell, .ui-inputtext, .ui-inputtextarea, .ui-panelgrid,
	.ui-panelgrid tbody, .ui-password, .ui-inputfield {
	width: 100%;
}

.link-esqueci {
	display: block;
	text-align: center;
	margin-top: 15px;
	font-size: 13px;
	color: #0EA5E9;
	text-decoration: none;
	transition: color 0.2s;
}

.link-esqueci:hover {
	color: #10B981;
	text-decoration: underline;
}

.tituloTexto {
	font-size: 1.8rem;
	font-weight: 700;
	color: #333;
	margin-bottom: 20px;
	display: block;
}

.padPg.pgWidth {
	padding: 0;
	margin-bottom: 12px;
	text-align: center;
}

.padPg.pgWidth:last-of-type {
	margin-bottom: 0;
}

.label-center {
	text-align: center;
	width: 100%;
	display: block;
	margin-bottom: 3px;
	color: #555;
	font-weight: 600;
	font-size: 0.9rem;
}
</style>
</h:head>

<h:body>

	<a href="#{request.contextPath}/landing.xhtml" class="home-link"> <span
		style="font-size: 2rem; vertical-align: middle;">&#128197;</span> <span
		class="logo-text">Flash Quadras</span>
	</a>

	<div class="divBody">
		<h:form id="form1">

			<p:growl id="mensagem" life="5000" autoUpdate="true" />

			<div class="divLogin">
				<p:panelGrid columns="1" layout="grid"
					styleClass="ui-panelgrid-blank">

					<p:panelGrid columns="1" styleClass="padPg pgWidth">
						<p:outputLabel value="Realize o Login!" styleClass="tituloTexto" />
					</p:panelGrid>

					<p:panelGrid columns="1" styleClass="padPg pgWidth">
						<div style="text-align: left; width: 100%;">
							<p:outputLabel value="CPF" for="usuario"
								styleClass="label-center" />
							<p:inputMask id="usuario" value="#{loginBean.cpf}"
								styleClass="stInput" placeholder="000.000.000-00"
								mask="999.999.999-99" />
						</div>
					</p:panelGrid>

					<p:panelGrid columns="1" styleClass="padPg pgWidth">
						<div style="text-align: left; width: 100%;">
							<p:outputLabel value="Senha" for="senha"
								styleClass="label-center" />
							<p:password id="senha" value="#{loginBean.senha}"
								toggleMask="true" styleClass="stInput"
								placeholder="Sua senha secreta" />
						</div>
					</p:panelGrid>

					<p:panelGrid columns="1" styleClass="padPg pgWidth">
						<p:commandButton value="Entrar"
							actionListener="#{loginBean.doLogin()}" styleClass="btnLogin"
							process="@form" update="@form" icon="pi pi-sign-in" ajax="false" />
					</p:panelGrid>

					<p:panelGrid columns="1" styleClass="padPg pgWidth">
						<p:button value="Criar Conta" icon="pi pi-user-plus"
							outcome="/publico/cadastros/cadastro-cliente.xhtml"
							styleClass="btnCadastro" />
					</p:panelGrid>

					<p:commandLink value="Esqueci minha senha"
						actionListener="#{loginBean.abrirDialogEsqueciMinhaSenha}"
						styleClass="link-esqueci" process="@this" update=":formEsqueci"
						oncomplete="PF('wvDlgEsqueciMinhaSenha').show()" />

				</p:panelGrid>
			</div>
		</h:form>

		<p:dialog header="Recuperar Senha" widgetVar="wvDlgEsqueciMinhaSenha"
			modal="true" resizable="false" closable="true" width="450px">

			<h:form id="formEsqueci">
				<p:growl id="msgDialog" life="5000" />
				<p:panelGrid columns="1" layout="grid"
					styleClass="ui-panelgrid-blank">

					<p:outputLabel value="Confirme seus dados para redefinir a senha."
						style="margin-bottom: 10px; display:block; text-align:center; color:#555;" />

					<h:outputLabel for="cpfEsqueci" value="Seu CPF:"
						style="font-weight:bold;" />
					<p:inputMask id="cpfEsqueci" value="#{loginBean.cpf}"
						mask="999.999.999-99" required="true" style="width:100%" />

					<h:outputLabel for="telEsqueci" value="Seu Telefone:"
						style="margin-top: 10px; font-weight:bold; display:block;" />
					<p:inputMask id="telEsqueci" value="#{loginBean.telefone}"
						mask="(99) 99999-9999" required="true" style="width:100%" />

					<p:separator style="margin-top: 15px;" />

					<h:outputLabel for="novaSenha" value="Nova Senha:"
						style="font-weight:bold;" />
					<p:password id="novaSenha" value="#{loginBean.novaSenha}"
						toggleMask="true" feedback="true" required="true"
						style="width:100%" />

					<h:outputLabel for="confSenha" value="Confirme a Senha:"
						style="margin-top: 10px; font-weight:bold; display:block;" />
					<p:password id="confSenha"
						value="#{loginBean.confirmacaoNovaSenha}" toggleMask="true"
						required="true" style="width:100%" />

				</p:panelGrid>

				<p:separator />

				<div style="text-align: center; padding-bottom: 10px;">
					<p:commandButton value="Alterar Senha" icon="pi pi-check"
						actionListener="#{loginBean.alterarSenha}" process="@form"
						update="@form :form1:mensagem" styleClass="btnDialog" />
				</div>

			</h:form>
		</p:dialog>

	</div>
</h:body>
</html>